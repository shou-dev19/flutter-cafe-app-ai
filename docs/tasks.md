# Flutter カフェ注文アプリ - 改善タスクリスト

このドキュメントは、プロジェクトの品質向上と機能拡張のための改善タスクをまとめています。

## 優先度：高（Critical）

### 1. アーキテクチャの一貫性修正
- [ ] **抹茶ラテのカテゴリ修正** (`lib/data/menu_data.dart:52`)
  - 抹茶ラテを「コーヒー」から「お茶」カテゴリに変更
  - カテゴリの一貫性を保つためのルール策定

### 2. コード品質の重要な修正
- [ ] **Immutabilityの修正** (`lib/models/cart.dart:16`)
  - CartItemの直接変更を避け、新しいインスタンスを作成するよう修正
  - 状態の一貫性とバグ防止のため
- [ ] **エラーハンドリングの改善** (`lib/providers/cart_provider.dart:44`)
  - print文を適切なログ機能に置換
  - ユーザーへの適切なエラーメッセージ表示機能を追加

## 優先度：中（Medium）

### 3. ユーザビリティの向上
- [ ] **カートアイテム数量調整機能**
  - カート内でアイテムの数量を増減できる機能を追加
  - +/-ボタンの実装
- [ ] **価格表示の統一**
  - 全ての価格表示に円マーク（¥）を追加
  - 価格フォーマット用のヘルパー関数を作成
- [ ] **注文履歴機能の実装**
  - 過去の注文を確認できる機能
  - 注文詳細の表示機能

### 4. コード構造の改善
- [ ] **main.dartのリファクタリング** (`lib/main.dart:183-189`)
  - 過剰なコメント行の削除
  - ネストが深すぎる構造の改善
  - WidgetをUIコンポーネントに分割

### 5. テストカバレッジの向上
- [ ] **Widgetテストの追加**
  - MenuCardウィジェットのテスト強化
  - CartViewウィジェットのテスト追加
- [ ] **エラーケーステストの実装**
  - ネットワークエラー時の挙動テスト
  - 空カート状態のテスト
  - 不正データ入力のテスト

## 優先度：低（Low）

### 6. パフォーマンス最適化
- [ ] **画像読み込みの最適化**
  - メニューアイテム画像のキャッシュ機能実装
  - 遅延読み込み（lazy loading）の導入
- [ ] **仮想化スクロールの実装**
  - 大量のメニューアイテムに対する仮想化スクロール
  - パフォーマンス測定とベンチマーク

### 7. 国際化・多言語対応
- [ ] **i18n対応の実装**
  - flutter_localizationsパッケージの導入
  - ハードコードされた日本語文字列の外部化
  - 英語版の対応

### 8. セキュリティ・運用改善
- [ ] **環境設定の分離**
  - 開発・ステージング・本番環境の設定分離
  - 設定ファイルの外部化
- [ ] **エラーバウンダリーの実装**
  - アプリケーション全体のエラーハンドリング改善
  - クラッシュレポート機能の実装

## 技術債務

### コードスタイル・保守性
- [ ] **コードフォーマットの統一**
  - dart formatの自動実行設定
  - プリコミットフックの設定
- [ ] **依存関係の最新化**
  - パッケージのセキュリティ更新
  - 非推奨APIの置換

### ドキュメント整備
- [ ] **API仕様書の作成**
  - 将来のバックエンド連携用のAPI設計
  - データモデルの詳細仕様
- [ ] **開発者向けドキュメントの充実**
  - セットアップガイドの改善
  - アーキテクチャ設計書の作成

## 将来的な機能拡張

### 新機能候補
- [ ] **お気に入り機能**
  - メニューアイテムのお気に入り登録
  - お気に入りリストの表示
- [ ] **レビュー・評価機能**
  - 商品レビューの表示
  - 評価システムの実装
- [ ] **カスタマイズオプション**
  - サイズ変更（S/M/L）
  - トッピング追加機能
- [ ] **決済機能の実装**
  - 各種決済手段への対応
  - 領収書発行機能

---

## 作業進行時の注意事項

1. **テスト駆動開発**：機能追加・修正時は必ずテストを先に作成
2. **段階的な改善**：大きな変更は小さなステップに分割
3. **レビュー体制**：重要な変更はコードレビューを実施
4. **パフォーマンス測定**：変更後は必要に応じてパフォーマンス測定を実施
5. **ユーザビリティテスト**：UI/UX変更時はユーザビリティテストを検討

---

*最終更新: 2025-08-07*